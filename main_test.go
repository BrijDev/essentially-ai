package main

import (
	"testing"
)

func TestDecodePacket(t *testing.T) {
	packet := []byte{
		0x04, 0xD2, 0x6B, 0x65, 0x65, 0x70, 0x64, 0x65, 0x63, 0x6F, 0x64, 0x69, 0x6E, 0x67,
		0x38, 0x64, 0x6F, 0x6E, 0x74, 0x73, 0x74, 0x6F, 0x70, 0x03, 0x15, 0x63, 0x6F, 0x6E,
		0x67, 0x72, 0x61, 0x74, 0x75, 0x6C, 0x61, 0x74, 0x69, 0x6F, 0x6E, 0x73, 0x07, 0x5B, 0xCD, 0x15,
	}

	decodedStruct, err := decodePacket(packet)
	if err != nil {
		t.Errorf("Expected no error, but got: %v", err)
	}

	expected := &DecodedStruct{
		Short1: 1234,
		Chars1: "keepdecoding",
		Byte1:  56,
		Chars2: "dontstop",
		Short2: 789,
		Chars3: "congratulations",
		Long1:  123456789,
	}

	if *decodedStruct != *expected {
		t.Errorf("Expected %v, but got %v", expected, decodedStruct)
	}
}
